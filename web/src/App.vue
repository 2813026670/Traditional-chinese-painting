<script>
import { ref } from 'vue'
import axios from 'axios';
import MyInput from './components/MyInput.vue';
import ColorPalette from './components/ColorPalette.vue';
export default {
  components: {
    MyInput,

  },

  data() {
    return {
      feedbackArray: [],
      msg: "TcpColor",
      box: "container",
      topbox: "title",
      texttitle: "text",
      mainbox: "main",
      leftbox: "left",
      middlebox: "middle",
      middleTopbox: "middle-top",
      middleBottombox: "middle-bottom",
      rightbox: "right",

      inputValue: '',
      selected1: [],
      options1: [
        { value: 'èŠ±é¸Ÿ', label: 'èŠ±é¸Ÿ' },
        { value: 'å±±æ°´', label: 'å±±æ°´' },
        { value: 'äººç‰©', label: 'äººç‰©' }
      ],
      feedback1: [],

      selected2: [],
      options2: [
        { value: 'æ°”éŸµ', label: 'æ°”éŸµ' },
        { value: 'ç¥å¦™', label: 'ç¥å¦™' },
        { value: 'é«˜å¤', label: 'é«˜å¤' },
        { value: 'è‹æ¶¦', label: 'è‹æ¶¦' },
        { value: 'æ²‰é›„', label: 'æ²‰é›„' },
        { value: 'å†²å’Œ', label: 'å†²å’Œ' },
        { value: 'æ¾¹è¿œ', label: 'æ¾¹è¿œ' },
        { value: 'æœ´æ‹™', label: 'æœ´æ‹™' },
        { value: 'è¶…è„±', label: 'è¶…è„±' },
        { value: 'å¥‡è¾Ÿ', label: 'å¥‡è¾Ÿ' },
        { value: 'çºµæ¨ª', label: 'çºµæ¨ª' },
        { value: 'æ·‹æ¼“', label: 'æ·‹æ¼“' },
        { value: 'è’å¯’', label: 'è’å¯’' },
        { value: 'æ¸…æ—·', label: 'æ¸…æ—·' },
        { value: 'æ€§çµ', label: 'æ€§çµ' },
        { value: 'åœ†æµ‘', label: 'åœ†æµ‘' },
        { value: 'å¹½é‚', label: 'å¹½é‚' },
        { value: 'æ˜å‡€', label: 'æ˜å‡€' },
        { value: 'å¥æ‹”', label: 'å¥æ‹”' },
        { value: 'ç®€æ´', label: 'ç®€æ´' },
        { value: 'ç²¾è°¨', label: 'ç²¾è°¨' },
        { value: 'å„çˆ½', label: 'å„çˆ½' },
        { value: 'ç©ºçµ', label: 'ç©ºçµ' },
        { value: 'éŸ¶ç§€', label: 'éŸ¶ç§€' },
      ],
      feedback2: [],

      selected3: [],
      options3: [{ 'value': 'ç”»ä½œ', 'label': 'ç”»ä½œ' }, { 'value': 'é¸Ÿ', 'label': 'é¸Ÿ' }, { 'value': 'æ ‘æ', 'label': 'æ ‘æ' }, { 'value': 'ç«¹', 'label': 'ç«¹' }, { 'value': 'å°ç« ', 'label': 'å°ç« ' }, { 'value': 'èŠ±', 'label': 'èŠ±' }, { 'value': 'æœˆäº®', 'label': 'æœˆäº®' }, { 'value': 'å±±çŸ³', 'label': 'å±±çŸ³' }, { 'value': 'æ—¥', 'label': 'æ—¥' }, { 'value': 'è½¦', 'label': 'è½¦' }, { 'value': 'èŠ¦è‹‡', 'label': 'èŠ¦è‹‡' }, { 'value': 'è—»', 'label': 'è—»' }, { 'value': 'é¸­', 'label': 'é¸­' }, { 'value': 'å…°', 'label': 'å…°' }, { 'value': 'ä¼', 'label': 'ä¼' }, { 'value': 'èˆŸèˆ¹', 'label': 'èˆŸèˆ¹' }, { 'value': 'æ¡¥', 'label': 'æ¡¥' }, { 'value': 'è·å¶', 'label': 'è·å¶' }, { 'value': 'é¸³é¸¯', 'label': 'é¸³é¸¯' }, { 'value': 'äº‘', 'label': 'äº‘' }, { 'value': 'ç¯®', 'label': 'ç¯®' }, { 'value': 'ä½œå“å±é£', 'label': 'ä½œå“å±é£' }, { 'value': 'é©¬', 'label': 'é©¬' }, { 'value': 'å¡', 'label': 'å¡' }, { 'value': 'é¸Ÿ', 'label': 'é¸Ÿ' }, { 'value': 'è‰', 'label': 'è‰' }, { 'value': 'å±±', 'label': 'å±±' }, { 'value': 'èˆ¹', 'label': 'èˆ¹' }, { 'value': 'è”¬èœ', 'label': 'è”¬èœ' }, { 'value': 'æœˆ', 'label': 'æœˆ' }, { 'value': 'çŸ³', 'label': 'çŸ³' }, { 'value': 'æœ', 'label': 'æœ' }, { 'value': 'è·', 'label': 'è·' }, { 'value': 'é¹…', 'label': 'é¹…' }, { 'value': 'æ¢…', 'label': 'æ¢…' }, { 'value': 'é±¼', 'label': 'é±¼' }, { 'value': 'çµèŠ', 'label': 'çµèŠ' }, { 'value': 'å±é£', 'label': 'å±é£' }, { 'value': 'é©´', 'label': 'é©´' }, { 'value': 'å¶', 'label': 'å¶' }, { 'value': 'æ ‘æœ¨', 'label': 'æ ‘æœ¨' }, { 'value': 'é¾™', 'label': 'é¾™' }, { 'value': 'ç«¹ç¯®', 'label': 'ç«¹ç¯®' }, { 'value': 'è™«', 'label': 'è™«' }, { 'value': 'é¢˜è·‹', 'label': 'é¢˜è·‹' }, { 'value': 'ç€‘å¸ƒ', 'label': 'ç€‘å¸ƒ' }, { 'value': 'äººç‰©', 'label': 'äººç‰©' }, { 'value': 'å‡å±±', 'label': 'å‡å±±' }, { 'value': 'é©¬è½¦', 'label': 'é©¬è½¦' }, { 'value': 'äº­å°', 'label': 'äº­å°' }, { 'value': 'ç”»ä½œå±é£', 'label': 'ç”»ä½œå±é£' }, { 'value': 'æ¥¼é˜', 'label': 'æ¥¼é˜' }, { 'value': 'æ°´', 'label': 'æ°´' }, { 'value': 'èŠ', 'label': 'èŠ' }, { 'value': 'èµ°å…½', 'label': 'èµ°å…½' }, { 'value': 'é©¬é', 'label': 'é©¬é' }, { 'value': 'è½¦è½¿', 'label': 'è½¦è½¿' }, { 'value': 'é¸¡', 'label': 'é¸¡' }, { 'value': 'æ¾', 'label': 'æ¾' }],
      feedback3: [],

      selected4: [],
      options4: [{ 'value': 'è¡Œäº‘æµæ°´æ', 'label': 'è¡Œäº‘æµæ°´æ' }, { 'value': 'æµ“æ·¡ç›¸é—´æ³•', 'label': 'æµ“æ·¡ç›¸é—´æ³•' }, { 'value': 'è§£ç´¢çš´', 'label': 'è§£ç´¢çš´' }, { 'value': 'æ³¼å¢¨æ³¼å½©æ³•', 'label': 'æ³¼å¢¨æ³¼å½©æ³•' }, { 'value': 'åŒå‹¾æ³•ï¼ˆå†™æ„ï¼‰', 'label': 'åŒå‹¾æ³•ï¼ˆå†™æ„ï¼‰' }, { 'value': 'èš‚è—æ', 'label': 'èš‚è—æ' }, { 'value': 'å‹¾å¡«æ³•ï¼ˆå†™æ„ï¼‰', 'label': 'å‹¾å¡«æ³•ï¼ˆå†™æ„ï¼‰' }, { 'value': 'ç±³ç‚¹çš´', 'label': 'ç±³ç‚¹çš´' }, { 'value': 'æ–§åŠˆçš´', 'label': 'æ–§åŠˆçš´' }, { 'value': 'æ²¡éª¨æ³•ï¼ˆå†™æ„ï¼‰', 'label': 'æ²¡éª¨æ³•ï¼ˆå†™æ„ï¼‰' }, { 'value': 'é«˜å¤æ¸¸ä¸æ', 'label': 'é«˜å¤æ¸¸ä¸æ' }, { 'value': 'æŠ˜èŠ¦æ', 'label': 'æŠ˜èŠ¦æ' }, { 'value': 'å‹¾æŸ“æ³•ï¼ˆå†™æ„ï¼‰', 'label': 'å‹¾æŸ“æ³•ï¼ˆå†™æ„ï¼‰' }, { 'value': 'å·¥ç¬”æ·¡å½©æ³•', 'label': 'å·¥ç¬”æ·¡å½©æ³•' }, { 'value': 'ç ´å¢¨ç ´è‰²æ³•ï¼ˆå†™æ„ï¼‰', 'label': 'ç ´å¢¨ç ´è‰²æ³•ï¼ˆå†™æ„ï¼‰' }, { 'value': 'æŠ˜å¸¦çš´', 'label': 'æŠ˜å¸¦çš´' }, { 'value': 'ä¹±æŸ´çš´', 'label': 'ä¹±æŸ´çš´' }, { 'value': 'æŠ«éº»çš´', 'label': 'æŠ«éº»çš´' }, { 'value': 'æ··æ', 'label': 'æ··æ' }, { 'value': 'å…¼å·¥å¸¦å†™æ³•', 'label': 'å…¼å·¥å¸¦å†™æ³•' }, { 'value': 'æ²¡éª¨æ³•ï¼ˆå·¥ç¬”ï¼‰', 'label': 'æ²¡éª¨æ³•ï¼ˆå·¥ç¬”ï¼‰' }, { 'value': 'æ›¹è¡£æ', 'label': 'æ›¹è¡£æ' }, { 'value': 'å¼¹æ¶¡çš´', 'label': 'å¼¹æ¶¡çš´' }, { 'value': 'é›¨ç‚¹çš´', 'label': 'é›¨ç‚¹çš´' }, { 'value': 'æ²¡éª¨æ³•', 'label': 'æ²¡éª¨æ³•' }, { 'value': 'åŒå‹¾æ³•', 'label': 'åŒå‹¾ æ³•' }, { 'value': 'æ¯æŸ´æ', 'label': 'æ¯æŸ´æ' }, { 'value': 'é’‰å¤´é¼ å°¾æ', 'label': 'é’‰å¤´é¼ å°¾æ' }, { 'value': 'é“çº¿æ', 'label': 'é“çº¿æ' }, { 'value': 'ç™½ ææ³•', 'label': 'ç™½ææ³•' }, { 'value': 'èš¯èš“æ', 'label': 'èš¯èš“æ' }, { 'value': 'ç ´å¢¨ç ´è‰²æ³•', 'label': 'ç ´å¢¨ç ´è‰²æ³•' }, { 'value': 'æµ“æ·¡ç›¸é—´æ³•ï¼ˆå·¥ç¬”ï¼‰', 'label': 'æµ“æ·¡ç›¸é—´æ³•ï¼ˆå·¥ç¬”ï¼‰' }, { 'value': 'ç™½ææ³•ï¼ˆå·¥ç¬”ï¼‰', 'label': 'ç™½ææ³•ï¼ˆå·¥ç¬”ï¼‰' }, { 'value': 'æ£æ ¸æ', 'label': 'æ£æ ¸æ' }, { 'value': 'æŸ³å¶æ', 'label': 'æŸ³å¶æ' }, { 'value': 'ç´å¼¦æ', 'label': 'ç´å¼¦æ' }, { 'value': 'é•¢å¤´é’‰æ', 'label': 'é•¢å¤´é’‰æ' }, { 'value': 'å·¥ç¬”é‡å½©æ³•', 'label': 'å·¥ç¬”é‡å½©æ³•' }, { 'value': 'é©¬ç‰™çš´', 'label': 'é©¬ç‰™çš´' }, { 'value': 'æˆ˜ç¬”æ°´çº¹æ', 'label': 'æˆ˜ç¬”æ°´çº¹æ' }, { 'value': 'ç‰›æ¯›çš´', 'label': 'ç‰›æ¯›çš´' }, { 'value': 'å‹¾æŸ“æ³•', 'label': 'å‹¾æŸ“æ³•' }, { 'value': 'ç«¹å¶æ', 'label': 'ç«¹å¶æ' }, { 'value': 'å·äº‘çš´', 'label': 'å·äº‘çš´' }, { 'value': 'è·å¶çš´', 'label': 'è·å¶çš´' }, { 'value': 'æ³¼å¢¨æ³¼å½©æ³•ï¼ˆå†™æ„ï¼‰', 'label': 'æ³¼å¢¨æ³¼å½©æ³•ï¼ˆå†™æ„ï¼‰' }, { 'value': 'æ‹–æ³¥å¸¦æ°´çš´', 'label': 'æ‹–æ³¥å¸¦æ°´çš´' }, { 'value': 'å‡ç¬”æ', 'label': 'å‡ç¬”æ' }, { 'value': 'æ³¼å¢¨', 'label': 'æ³¼å¢¨' }, { 'value': 'å‹¾å¡«æ³•', 'label': 'å‹¾å¡«æ³•' }],
      feedback4: [],

      selected5: [],
      options5: [{ 'value': 'é‡å½©-é‡‘ç¢§', 'label': 'é‡å½©-é‡‘ç¢§' }, { 'value': 'å´å¦†', 'label': 'å´å¦†' }, { 'value': 'æ°´å¢¨', 'label': 'æ°´å¢¨' }, { 'value': 'ç™½æ', 'label': 'ç™½æ' }, { 'value': 'æµ…è®¾è‰²', 'label': 'æµ…è®¾è‰²' }, { 'value': 'æ·¡å½©-èºé’', 'label': 'æ·¡å½©-èºé’' }, { 'value': 'æ·¡å½©', 'label': 'æ·¡å½©' }, { 'value': 'è®¾è‰²ã€ æé‡‘', 'label': 'è®¾è‰²ã€æé‡‘' }, { 'value': 'é‡å½©-é’ç»¿', 'label': 'é‡å½©-é’ç»¿' }, { 'value': 'é‡å½©', 'label': 'é‡å½©' }, { 'value': 'è®¾è‰²', 'label': 'è®¾è‰²' }, { 'value': 'æ·¡å½©-æµ…ç»›', 'label': 'æ·¡å½©-æµ…ç»›' }],
      feedback5: [],
      images: [],
      images2: [
        '../å›¾ç‰‡/OIP-1.jpg',
        'å›¾ç‰‡/OIP-2.jpg',
        'å›¾ç‰‡/OIP-3.jpg',
        'å›¾ç‰‡/OIP-4.jpg',
        'å›¾ç‰‡/OIP-5.jpg',
        'å›¾ç‰‡/OIP-6.jpg',
        'å›¾ç‰‡/OIP-7.jpg',
        'å›¾ç‰‡/OIP-8.jpg',
        'å›¾ç‰‡/OIP-9.jpg'
      ],//æµ‹è¯•å›¾ç‰‡æ˜¾ç¤º
      tiaoseimages: [],
      tiaoseimages2: [
        '../å›¾ç‰‡/OIP-1.jpg',
        'å›¾ç‰‡/OIP-2.jpg',
        'å›¾ç‰‡/OIP-3.jpg',

      ],
      prompts: [],
      feedbackImage: [],
      feedbackKeywords: [],

      selectedColorGroup: '', // åˆå§‹æœªé€‰æ‹©ä»»ä½•è‰²ç³»  
      selectedMonoColor: '', // åˆå§‹æœªé€‰æ‹©å•è‰²ç³»ä¸­çš„é¢œè‰²  
      fiveColors: [
        { name: 'é’', color: 'rgb(3,0,249)' },
        { name: 'èµ¤', color: 'red' },
        { name: 'ç™½', color: 'white' },
        { name: 'é»‘', color: 'black' },
        { name: 'é»„', color: 'yellow' },
      ],
      monoColors: ['é’', 'èµ¤', 'ç™½/é»‘', 'é»„'], // å•è‰²ç³»çš„é¢œè‰²å  
      colorNames: [],
      colorNames2: [],
      colorRGBs: [],
      colorRGBs2: null,
      imageBase64s: [],
      palettearray: [],
      testcolorRGB: [],
      testcolorRGB2: [],
      testcolorNAMES: [],
      currentPaletteIndex: null,

      selectColorNumberArray: '',
      colorNumber: [
        { value: '3', label: '3' },
        { value: '5', label: '5' },
      ],
      SelectedColorNumber: '',
      OneOrFiveColored: '',

      listData: ["åŸå›¾é…è‰²æ–¹æ¡ˆ", "æ¨èé…è‰²æ–¹æ¡ˆ"],
      activeIndex: null,

      roomId: null,
      resultId: null,

      copyimagesHome: 'D:/BaiduNetdiskDownload/S2På®˜æ–¹é…å¸ƒ/style2paints45beta1214B/style2paints45beta1214B/assets/game/rooms/',
      copyimages: '',

      selectedFile: null,
      processedImage: null,
      errorMessage: '', // æ–°å¢é”™è¯¯ä¿¡æ¯çŠ¶æ€
      base64Image: null,
      base64Content: null,

      showModal: false, // æ§åˆ¶å¼¹çª—çš„æ˜¾ç¤ºä¸éšè—  
      roomimages: [],

      displayedImages: [], // è¿™é‡Œå°†å­˜æ”¾æ˜¾ç¤ºçš„8å¼ å›¾ç‰‡

      displayedImages1: [],// è¿™é‡Œå°†å­˜æ”¾ç¬¬1~8å¼ å›¾ç‰‡
      displayedImages2: [],
      displayedImages3: [],
      displayedImages4: [],
      displayedImages5: [],

      currentRoom: localStorage.getItem('currentRoom') || '',
    }
  },



  setup() {


    const checked1 = ref('1');
    const checked2 = ref(false);
    const radio1 = ref('1');
    return { checked1, checked2, radio1 };
  },

  methods: {
    handlechange1(value) {
      this.feedback1 = value;
    },
    handledelete1(index) {
      this.feedback1.splice(index, 1);
    },

    handlechange2(value) {
      this.feedback2 = value;
    },
    handledelete2(index) {
      this.feedback2.splice(index, 1);
    },

    handlechange3(value) {
      this.feedback3 = value;
    },
    handledelete3(index) {
      this.feedback3.splice(index, 1);
    },

    handlechange4(value) {
      this.feedback4 = value;
    },
    handledelete4(index) {
      this.feedback4.splice(index, 1);
    },

    handlechange5(value) {
      this.feedback5 = value;
    },
    handledelete5(index) {
      this.feedback5.splice(index, 1);
    },

    hasFeedback() {
      return (
        this.feedback1.length > 0 ||
        this.feedback2.length > 0 ||
        this.feedback3.length > 0 ||
        this.feedback4.length > 0 ||
        this.feedback5.length > 0 ||
        this.inputValue > 0
      );
    },

    generateImages() {
      //this.prompts = this.feedbackArray;
      this.prompts = [this.feedback1, this.feedback2, this.feedback3, this.feedback4, this.feedback5, 'è‰²ç³»', this.inputValue];
    },
    testTiaoseFunction() {
      this.tiaoseimages = this.tiaoseimages2;
    },

    FiveColorSelectFunction() {
      this.OneOrFiveColored = "äº”è‰²ç³»";
    },
    OneColorSelectFunction(monoColor) {
      this.OneOrFiveColored = monoColor + "è‰²ç³»";
    },

    OneOrFiveColorSelectFunction() {
      this.prompts.splice(5, 1, this.OneOrFiveColored);
    },

    sendPostRequest() {
      axios.post('/get_palette', {
        prompt: this.prompts
      },
        {
          timeout: 500000 // è®¾ç½® 5 ç§’çš„è¶…æ—¶æ—¶é—´  
        })
        .then(response => {
          const palettesData = response.data; // å‡è®¾ response.data æ˜¯è°ƒè‰²æ¿ä¿¡æ¯çš„æ•°ç»„  

          // åˆå§‹åŒ–æ•°ç»„  
          this.colorNames = [];
          this.colorRGBs = [];
          this.imageBase64s = [];

          // éå†è°ƒè‰²æ¿æ•°æ®  
          palettesData.forEach(item => {
            const { palette, image } = item;
            const { color_names, color_rgb } = palette;
            // å°†é¢œè‰²åç§°ã€é¢œè‰² RGB å€¼å’Œå›¾ç‰‡ base64 ç¼–ç åˆ†åˆ«æ·»åŠ åˆ°æ•°ç»„ä¸­
            this.palettearray = this.palettearray.concat(palette);
            this.colorNames.push(color_names);
            this.colorRGBs.push(color_rgb);
            this.imageBase64s.push(image);


            this.images = this.imageBase64s.map(base64 => {
              // å‡è®¾æ‰€æœ‰å›¾ç‰‡éƒ½æ˜¯PNGæ ¼å¼  
              return `data:image/png;base64,${base64}`;
            });
          });
        })
        .catch(error => {
          console.error('å‘é€è¯·æ±‚å¤±è´¥:', error);
        });
    },

    showPaletteNames(index) {
      this.currentPaletteIndex = index;
    },//æ˜¾ç¤ºé¢œè‰²æ–¹æ¡ˆåå­—
    hidePaletteNames() {
      this.currentPaletteIndex = null;
    },//éšè—é¢œè‰²æ–¹æ¡ˆåå­—

    selectColorNumber(value) {
      this.SelectedColorNumber = value;
    },

    extractColor(paletteIndex) {
      // æ¸…ç©º testcolorRGB å’Œ testcolorNAMES æ•°ç»„
      this.testcolorRGB = [];
      this.testcolorNAMES = [];

      // è·å–å½“å‰è°ƒè‰²æ¿çš„é¢œè‰²å€¼å’Œåç§°
      const colors = this.colorRGBs[paletteIndex];
      const colorNames = this.colorNames[paletteIndex];

      // æ ¹æ® SelectedColorNumber çš„å€¼å’Œé¢œè‰²æ•°ç»„çš„å®é™…é•¿åº¦ç¡®å®šå¤„ç†é¢œè‰²çš„æœ€å¤§æ•°é‡
      const limit = Math.min(this.SelectedColorNumber, colors.length);

      // è¿­ä»£é¢œè‰²ï¼Œæœ€å¤šè¿­ä»£åˆ° limit æŒ‡å®šçš„æ•°é‡ï¼Œå°†é¢œè‰²è½¬æ¢ä¸ºåå…­è¿›åˆ¶æ ¼å¼ï¼Œå¹¶å­˜å‚¨å¯¹åº”çš„åç§°
      for (let i = 0; i < limit; i++) {
        const hexColor = '#' + colors[i].toString(16).padStart(6, '0');
        this.testcolorRGB.push(hexColor);
        this.testcolorNAMES.push(colorNames[i]);
      }

      // æ›´æ–°å½“å‰é€‰ä¸­çš„è°ƒè‰²æ¿ç´¢å¼•
      this.currentPaletteIndex = paletteIndex;
    },

    imageButtomFunction() {
      this.generateImages();
      this.OneOrFiveColorSelectFunction();
      this.sendPostRequest();
    },
    updateColorNames() {
      this.SelectedColorNumber = 9;
    },
    changeColor(index) {
      this.activeIndex = index;
      if (index === 0) {
        this.updateColorNames();
      } else if (index === 1) {
        this.colorNames2 = this.sortByContrast(this.colorNames);
      }
    },

    //é‡æ–°æ’åº
    meanColor(row) {
      // å°†è¡Œè½¬æ¢ä¸º RGB å€¼æ•°ç»„
      const rgbValues = row.map(color =>
        [parseInt(color.substring(0, 2), 16),
        parseInt(color.substring(2, 4), 16),
        parseInt(color.substring(4, 6), 16)]
      );

      // è®¡ç®—å¹³å‡ RGB å€¼
      const meanRGB = rgbValues.reduce((acc, val) =>
        acc.map((sum, i) => sum + val[i]),
        [0, 0, 0]
      ).map(value => Math.floor(value / rgbValues.length));

      // è½¬æ¢å›åå…­è¿›åˆ¶å­—ç¬¦ä¸²
      return '#' + meanRGB.map(val => val.toString(16).padStart(2, '0')).join('');
    },
    darkestColor(array) {
      let darkestHex = '#ffffff';
      let darkestValue = Infinity;

      for (let row of array) {
        for (let color of row) {
          let rgbSum = parseInt(color.substring(0, 2), 16) +
            parseInt(color.substring(2, 4), 16) +
            parseInt(color.substring(4, 6), 16);

          if (rgbSum < darkestValue) {
            darkestValue = rgbSum;
            darkestHex = color;
          }
        }
      }

      return darkestHex;
    },
    euclideanDistance(color1, color2) {
      const rmean = (parseInt(color1.substring(1, 3), 16) + parseInt(color2.substring(1, 3), 16)) / 2;
      const r = parseInt(color1.substring(1, 3), 16) - parseInt(color2.substring(1, 3), 16);
      const g = parseInt(color1.substring(3, 5), 16) - parseInt(color2.substring(3, 5), 16);
      const b = parseInt(color1.substring(5, 7), 16) - parseInt(color2.substring(5, 7), 16);

      // ä½¿ç”¨æ„ŸçŸ¥åŠ æƒæ¬§å‡ é‡Œå¾—è·ç¦»å…¬å¼
      return Math.sqrt((2 + rmean * 0.0039) * (r ** 2) + 4 * (g ** 2) + (2 + (255 - rmean) * 0.0075) * (b ** 2));
    },
    sortByContrast(array) {
      const darkest = this.darkestColor(array);
      const distances = array.map(row => ({
        row,
        distance: this.euclideanDistance(this.meanColor(row), darkest)
      }));

      return distances.sort((a, b) => b.distance - a.distance).map(item => item.row);
    },
    sortColors() {
      this.colorRGBs2 = this.sortByContrast(this.colorNames);
    },


    //å›¾ç‰‡ä¸Šä¼ 
    handleFileUpload() {
      const file = event.target.files[0];
      if (file) {
        if (this.validateFileType(file)) { // æ·»åŠ æ–‡ä»¶ç±»å‹éªŒè¯
          this.selectedFile = file;
          const reader = new FileReader();
          // å®šä¹‰ FileReader åŠ è½½å®Œæˆåçš„å¤„ç†å‡½æ•°  
          reader.onload = (e) => {
            this.base64Image = e.target.result;
            this.base64Content = this.base64Image.replace(/^data:image\/[^;]+;base64,/, "");
            this.uploadSketch();
          }; reader.readAsDataURL(file);
        } else {
          this.errorMessage = 'åªæ”¯æŒPNGå›¾ç‰‡æ–‡ä»¶ä¸Šä¼ ï¼';
        }
      } else {
        this.errorMessage = 'è¯·é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ï¼';
      }
    },
    validateFileType(file) { // æ–‡ä»¶ç±»å‹éªŒè¯å‡½æ•°
      const allowedTypes = ['image/png'];
      return allowedTypes.includes(file.type);
    },
    //ç¬¬ä¸€ä¸ªæ¥å£ï¼Œå¾—åˆ°roomID
    uploadSketch() {
      const formData = new FormData();
      formData.append('sketch', this.base64Content);
      axios.post('http://127.0.0.1:8233/upload_sketch', formData, {
        headers: {
          'Content-Type': 'multipart/form-data'
        }
      })
        .then(response => {
          this.roomId = response.data.roomId;
          this.errorMessage = ''; // æ¸…é™¤é”™è¯¯ä¿¡æ¯
        })
        .catch(error => {
          this.errorMessage = 'ä¸Šä¼ è‰å›¾å¤±è´¥ï¼Œè¯·é‡è¯•ï¼';
          console.error(error);
        });
    },
    //ç¬¬äºŒä¸ªæ¥å£ï¼Œå¾—åˆ°è¿”å›ID
    sendRequestResult() {
      axios.post('http://127.0.0.1:8233/request_result', {
        room: this.roomId
      })
        .then(response => {
          this.resultId = response.data.resultId;
          this.errorMessage = ''; // æ¸…é™¤é”™è¯¯ä¿¡æ¯
        })
        .catch(error => {
          this.errorMessage = 'è¯·æ±‚å¤„ç†ç»“æœå¤±è´¥ï¼Œè¯·æ£€æŸ¥æˆ¿é—´IDå’Œå‚æ•°ï¼';
          console.error(error);
        });
    },
    //ç¬¬ä¸‰ä¸ªæ¥å£ï¼Œå¾—åˆ°å›¾ç‰‡base64
    getProcessedImage() {
      axios.post('http://127.0.0.1:8233/get_processed_image', { resultId: this.resultId }, {
        responseType: 'arraybuffer',
      })
        .then(response => {
          const base64String = btoa(new Uint8Array(response.data).reduce((data, byte) => data + String.fromCharCode(byte), ''));
          this.processedImage = `data:image/png;base64,${base64String}`;
          this.errorMessage = ''; // æ¸…é™¤é”™è¯¯ä¿¡æ¯
        })
        .catch(error => {
          this.errorMessage = 'è·å–å¤„ç†ç»“æœå›¾ç‰‡å¤±è´¥ï¼Œè¯·é‡è¯•ï¼';
          console.error(error);
        });
    },

    goToExternalPage() {
      window.open('http://127.0.0.1:8233/index.html', '_blank');   //è·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢
      //window.open('http://localhost:5173/', '_blank');
    },

    fetchImages() {
      //this.copyimages = `${this.copyimagesHome}${this.resultId}`
      this.copyimages = `${this.copyimagesHome}${tupian}`
    },


    generateAndShowImage() {
      this.drawColorGrid(this.$refs.colorCanvas);
    },
    drawColorGrid(canvas) {
      const ctx = canvas.getContext('2d');
      const colors = this.testcolorRGB;
      const cellSize = 100;
      const rows = Math.ceil(colors.length / 3); // æ¯è¡Œæœ€å¤šæ˜¾ç¤º6ä¸ªè‰²å—
      const cols = Math.min(colors.length, 3);

      for (let i = 0; i < colors.length; i++) {
        const row = Math.floor(i / cols);
        const col = i % cols;
        const x = col * cellSize;
        const y = row * cellSize;

        ctx.fillStyle = colors[i];
        ctx.fillRect(x, y, cellSize, cellSize);
      }
    },
    saveImage() {  
      const canvas = this.$refs.colorCanvas;  
      if (canvas.toDataURL) {  
        // åˆ›å»ºä¸€ä¸ªé“¾æ¥å…ƒç´   
        const link = document.createElement('a');  
        link.download = 'color-grid.png'; // æŒ‡å®šä¸‹è½½æ–‡ä»¶å  
        link.href = canvas.toDataURL('image/png').replace("image/png", "image/octet-stream"); // ä½¿ç”¨replaceæ›¿æ¢MIMEç±»å‹ä»¥ç¡®ä¿å…¼å®¹æ€§  
        link.click(); // æ¨¡æ‹Ÿç‚¹å‡»è¿›è¡Œä¸‹è½½  
  
        // æ¸…ç†ï¼ˆå¯é€‰ï¼‰  
        // document.body.removeChild(link);  
      } else {  
        console.error('Canvas.toDataURL() is not supported.');  
      }  
    },  


    async fetchAndDisplayImages() {
      try {
        const response = await axios.get('/get_latest_images');
        this.roomimages = response.data.images.map(image => `data:image/png;base64,${image}`);
        //this.roomimages = response.data.images;
        console.log(this.roomimages);
        this.displayedImages1 = this.roomimages.slice(0, 8); // å–å‰8å¼ å›¾ç‰‡,ä¸ºç¬¬ä¸€ç»„
        this.displayedImages2 = this.roomimages.slice(8, 16); // å–ç¬¬9~16å›¾ç‰‡,ä¸ºç¬¬äºŒç»„
        this.displayedImages3 = this.roomimages.slice(16, 24);
        this.displayedImages4 = this.roomimages.slice(24, 32);
        this.displayedImages5 = this.roomimages.slice(32, 40);
        this.displayedImages = this.displayedImages1;
        console.log(this.displayedImages2);
      } catch (error) {
        console.error('Failed to fetch images:', error);
      }
    },

    getImageSrc(base64String) {
      // ç¡®å®šå›¾åƒç±»å‹ï¼Œè¿™é‡Œå‡å®šæ‰€æœ‰å›¾åƒéƒ½æ˜¯PNG
      return `data:image/png;base64,${base64String}`;
    },

    SetdisplayedImages1() {
      this.displayedImages = this.displayedImages1;
    },
    SetdisplayedImages2() {
      this.displayedImages = this.displayedImages2;
      this.$forceUpdate(); 
    },
    SetdisplayedImages3() {
      this.displayedImages = this.displayedImages3;
    },
    SetdisplayedImages4() {
      this.displayedImages = this.displayedImages4;
    },
    SetdisplayedImages5() {
      this.displayedImages = this.displayedImages5;
    },

  },



  watch: {
    SelectedColorNumber(newVal, oldVal) {
      console.log(newVal, oldVal);
      for (let i = 0; i < this.colorNames.length; i++) {
        this.colorNames2[i] = this.colorNames[i].slice(0, newVal);
      };
    }
  },


  computed: {
    TextFeedback1() {//é€‰æ‹©æ¡†1çš„æ–‡æœ¬åé¦ˆä¿¡æ¯
      return this.feedback1.length > 0 ? this.TextFeedback1 = this.feedback1.join('ã€') : '';
    },
    TextFeedback2() {
      return this.feedback2.length > 0 ? this.TextFeedback2 = this.feedback2.join('ã€') : '';
    },
    TextFeedback3() {
      return this.feedback3.length > 0 ? this.TextFeedback3 = this.feedback3.join('ã€') : '';
    },
    TextFeedback4() {
      return this.feedback4.length > 0 ? this.TextFeedback4 = this.feedback4.join('ã€') : '';
    },
    TextFeedback5() {
      return this.feedback5.length > 0 ? this.TextFeedback5 = this.feedback5.join('ã€') : '';
    },
    feedbackStr2() {
      let feedbackStr = 'æ­¤å›¾ä¸ºä¼ ç»Ÿä¸­å›½ç”»';
      if (this.TextFeedback1) feedbackStr += `,ç±»å‹ä¸º${this.TextFeedback1}`;
      if (this.TextFeedback2) feedbackStr += `,æ„å¢ƒä¸º${this.TextFeedback2}`;
      if (this.TextFeedback3) feedbackStr += `,ç‰©è±¡ä¸º${this.TextFeedback3}`;
      if (this.TextFeedback4) feedbackStr += `,æŠ€æ³•ä¸º${this.TextFeedback4}`;
      if (this.TextFeedback5) feedbackStr += `,èµ‹å½©ä¸º${this.TextFeedback5}`;
      //if (this.OneOrFiveColored) feedbackStr += `,è‰²ç³»ä¸º${this.OneOrFiveColored}`;
      return feedbackStr;
    },
    feedbackArray() {
      return [this.feedbackStr2]; // ç¡®ä¿è¿”å›ä¸€ä¸ªæ•°ç»„

    },

  }
}

</script>

<template>
  <div v-bind:class="box">
    <div v-bind:class="topbox">
      <span v-bind:class="texttitle"> TcpColor </span>
    </div>
    <div v-bind:class="mainbox">
      <div v-bind:class="leftbox">
        <div class="leftTitle" style="display:flex; align-items:center;">
          <span style="color:#675229;font-size: 34px;">ğŸ…</span>
          <span v-bind:id="texttitle" style="color:#95815c;font-size: 18px;">æ§åˆ¶é¢æ¿</span>
        </div>
        <!--

        åé¦ˆæ¡†
        <div class="feedback">
          <div class="feedback1" v-if="feedback1.length > 0">
            <div class="feedback-option1" v-for="(item, index) in feedback1" :key="index">
              {{ item }}
              <button class="feed-button1" @click="handledelete1(index)">âœ–</button>
            </div>
          </div>

          <div class="feedback2" v-if="feedback2.length > 0">
            <div class="feedback-option2" v-for="(item, index) in feedback2" :key="index">
              {{ item }}
              <button class="feed-button2" @click="handledelete2(index)">âœ–</button>
            </div>
          </div>


          <div class="feedback3" v-if="feedback3.length > 0">
            <div class="feedback-option3" v-for="(item, index) in feedback3" :key="index">
              {{ item }}
              <button class="feed-button3" @click="handledelete3(index)">âœ–</button>
            </div>
          </div>

          <div class="feedback4" v-if="feedback4.length > 0">
            <div class="feedback-option4" v-for="(item, index) in feedback4" :key="index">
              {{ item }}
              <button class="feed-button4" @click="handledelete4(index)">âœ–</button>
            </div>
          </div>

          <div class="feedback5" v-if="feedback5.length > 0">
            <div class="feedback-option5" v-for="(item, index) in feedback5" :key="index">
              {{ item }}
              <button class="feed-button5" @click="handledelete5(index)">âœ–</button>
            </div>
          </div>
        </div>
        -->
        <div>
          <!-- ä½¿ç”¨ç»„ä»¶ -->
          <my-input v-model="inputValue" id="my-input" type="text" label="" placeholder="è¾“å…¥"
            style="margin-bottom: 2px;"></my-input>
        </div>

        <!--é€‰æ‹©æ¡†-->
        <div class="select">
          <div class="select1">
            <el-select v-model="selected1" placeholder="ä¸»é¢˜" multiple fallback-placements="top-start"
              @change="handlechange1">
              <el-option v-for="item in options1" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
          </div>

          <div class="select2">
            <el-select v-model="selected2" placeholder="æ„å¢ƒ" multiple fallback-placements="top-start"
              @change="handlechange2">
              <el-option v-for="item in options2" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
          </div>

          <div class="select3">
            <el-select v-model="selected3" placeholder="ç‰©è±¡" multiple fallback-placements="top-start"
              @change="handlechange3">
              <el-option v-for="item in options3" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
          </div>

          <div class="select4">
            <el-select v-model="selected4" placeholder="æŠ€æ³•" multiple fallback-placements="top-start"
              @change="handlechange4">
              <el-option v-for="item in options4" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
          </div>

          <div class="select5">
            <el-select v-model="selected5" placeholder="èµ‹å½©" multiple fallback-placements="top-start"
              @change="handlechange5">
              <el-option v-for="item in options5" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
          </div>
        </div>



        <div class="color-selector-container">
          <div class="color-selector">
            <el-radio-group v-model="selectedColorGroup" class="radio-group">
              <el-radio label="fiveColors" @change="FiveColorSelectFunction">äº”è‰²ç³»</el-radio>
              <el-radio label="monoColors">å•è‰²ç³»</el-radio>
            </el-radio-group>
            <div class="color-selector-show">
              <!-- äº”è‰²ç³»é¢œè‰²å— -->
              <div class="fiveColors-selector">
                <div v-for="(color, index) in fiveColors" :key="index" class="color-block-container">
                  <div class="color-block" :style="{ backgroundColor: color.color }"></div>
                  <div class="color-name">{{ color.name }}</div> <!-- å‡è®¾colorå¯¹è±¡æœ‰ä¸€ä¸ªnameå±æ€§ -->
                </div>
              </div>

              <!-- å•è‰²ç³»å•é€‰æ¡† -->
              <div v-if="selectedColorGroup === 'monoColors'" class="monoColors-selector">
                <el-radio-group v-model="selectedMonoColor" class="radio-group"
                  style="display: flex; flex-flow: column nowrap; align-items: flex-start;">
                  <el-radio v-for="(monoColor, index) in monoColors" :key="index" :label="monoColor"
                    @change="OneColorSelectFunction(monoColor)">
                    <span style="color: black; font-size: 16px;">{{ monoColor }}</span>
                  </el-radio>
                </el-radio-group>
              </div>
            </div>
          </div>
        </div>

        <div class="ColorFeedback-text" v-if="hasFeedback()">
          <p>æ­¤å›¾ä¸ºä¼ ç»Ÿä¸­å›½ç”»
            <span v-if="this.TextFeedback1">,ç±»å‹ä¸º{{ TextFeedback1 }}</span>
            <span v-if="this.TextFeedback2">,æ„å¢ƒä¸º{{ TextFeedback2 }}</span>
            <span v-if="this.TextFeedback3">,ç‰©è±¡ä¸º{{ TextFeedback3 }}</span>
            <span v-if="this.TextFeedback4">,æŠ€æ³•ä¸º{{ TextFeedback4 }}</span>
            <span v-if="this.TextFeedback5">,èµ‹å½©ä¸º{{ TextFeedback5 }}</span>
            <span v-if="this.OneOrFiveColored">,èµ‹å½©ä¸º{{ OneOrFiveColored }}</span>
          </p>
          <p v-if="this.inputValue.length > 0">
            ç”¨æˆ·è¾“å…¥:{{ this.inputValue }}
          </p>
        </div>
        <div class="produce-picture">
          <button @click="imageButtomFunction()"
            style="width: 150px; font-size: 15px ;height: 30px;color: rgb(161, 155, 139);  background-color: rgb(217, 217, 217);border: hidden;cursor: pointer;">
            ç”Ÿæˆé…è‰²æ–¹æ¡ˆ</button>
        </div>
      </div>


      <div v-bind:class="middlebox">
        <!-- ç”»ä½œæ¦‚è§ˆ -->
        <div v-bind:class="middleTopbox">
          <div style="display:flex; align-items:center;">
            <span style="color:#675229;font-size: 34px;">ğŸ…‘</span>
            <span v-bind:id="texttitle" style="color:#95815c;font-size: 18px;">ç”»ä½œæ¦‚è§ˆ</span>
          </div>
          <div class="grid-container">
            <div class="grid-item" v-for="(image, index) in images" :key="index">
              <img :src="image" :alt="'image ' + (index + 1)">
            </div>
          </div>
        </div>

        <div v-bind:class="middleBottombox">
          <div style="display:flex; align-items:center;">
            <span style="color:#675229;font-size: 34px;">ğŸ…’</span>
            <span v-bind:id="texttitle" style="color:#95815c;font-size: 18px;">æ¨èé…è‰²æ–¹æ¡ˆ</span>
          </div>
          <div class="test-tiaose">
            <div class="colorNumberBox">
              <span
                style="font-size: 15px; width: 80px; margin-top:4px; margin-right: 2%; margin-left: 5px;">é¢œè‰²æ•°é‡ï¼š</span>

              <el-select v-model="selectColorNumberArray" placeholder="è¯·é€‰æ‹©" @change="selectColorNumber"
                style="  align-content: center; width: 80px; height: 20px;margin-right: 6%; ">
                <el-option v-for="item in colorNumber" :key="item.value" :label="item.label" :value="item.value">
                </el-option>
              </el-select>
              <!--<button  @click="updateColorNames" style="height: 30px; margin-top:2px;margin-right: 6%;">
                åŸå›¾é…è‰²æ–¹æ¡ˆ
              </button>
              <button  @click="" style="height: 30px; margin-top:2px;">
                æ¨èé…è‰²æ–¹æ¡ˆ
              </button>-->

              <button class="chcolor" v-for="(item, index) in listData" :key="index" @click="changeColor(index)"
                :class="activeIndex === index ? 'active' : ''">
                {{ item }}
              </button>

            </div>
            <div style="display: flex;  flex-direction: row; flex:10; max-height: 263px;">
              <div class="ChooseColorScheme">
                <div v-for="(palette, index) in colorNames2" :key="index" class="palette-button"
                  @mouseover="showPaletteNames(index)" @mouseout="hidePaletteNames" @click="extractColor(index)">
                  <!-- éå†colorNames2æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªé¢œè‰²æ–¹æ¡ˆï¼ˆpaletteï¼‰ï¼Œä¸ºæ¯ä¸€ä¸ªæ–¹æ¡ˆåˆ›å»ºä¸€ä¸ªæŒ‰é’®-->
                  <div class="color-blocks-container">
                    <div v-for="(color, colorIndex) in palette" :key="colorIndex"
                      :style="{ backgroundColor: '#' + colorRGBs[index][colorIndex].toString(16).padStart(6, '0') }"
                      class="color-block"></div>
                  </div>
                  <div v-if="currentPaletteIndex === index" class="palette-names">
                    {{ palette.join(', ') }}
                  </div>
                </div>
              </div>
              <div class="TestButton">
                <div style="  display: flex; justify-content: center;">
                  <button @click="generateAndShowImage" style="margin: 1px auto;">ç”Ÿæˆå¹¶æ˜¾ç¤ºå›¾åƒ</button>
                  <button @click="saveImage" style="margin: 1px auto;">ä¿å­˜å›¾åƒ</button>  
                </div>
                <canvas ref="colorCanvas" width="300" height="300"></canvas>
                <button @click="goToExternalPage" style="height: 25px; margin: 5px auto;">æ‰“å¼€ä¸Šè‰²åŠŸèƒ½</button>
                <!--é€‰æ‹©çš„é¢œè‰²æ–¹æ¡ˆ-->
                <div class="color-scheme-display" style="margin: auto;">
                  <div v-for="(color, index) in testcolorRGB" :key="index" class="color-entry1">
                    <div class="color-preview1" :style="{ backgroundColor: color }"></div>
                    <span class="color-name1">{{ this.testcolorNAMES[index] }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div v-bind:class="rightbox">
        <div style="display:flex; align-items:center;">
          <span style="color:#675229;font-size: 34px;">ğŸ…“</span>
          <span v-bind:id="texttitle" style="color:#95815c;font-size: 18px;">æµ‹è¯•é…è‰²æ–¹æ¡ˆ</span>
        </div>
        <div style="  display: flex; flex-direction: column;">
          <!--<div>
            <button @click="goToExternalPage">æµ‹è¯•è·³è½¬é¡µé¢</button>

            <div>
              <button @click="showModal = true" style="height: 25px; margin: 5px auto;">æ‰“å¼€ä¸Šè‰²åŠŸèƒ½</button>
              <div v-if="showModal" class="modal-overlay">
                <div class="modal">
                  <button @click="showModal = false" class="close-btn">&times;</button>
                  <iframe src="http://127.0.0.1:8233/index.html" frameborder="0" class="modal-iframe"></iframe>
                </div>
              </div>
            </div>

            <div>
              <div>
                <button @click="fetchImages">æ˜¾ç¤ºå›¾ç‰‡</button>
                <div v-if="copyimages.length > 0">
                  <img v-for="(imageSrc, index) in copyimages" :key="index" :src="imageSrc" alt="Image">
                </div>
                <div v-else>æ²¡æœ‰å›¾ç‰‡å¯æ˜¾ç¤º</div>
              </div>
            </div>

            <input type="file" @change="handleFileUpload" />
            <button @click="sendRequestResult" :disabled="!roomId">è¯·æ±‚å¤„ç†ç»“æœ</button>
            <button @click="getProcessedImage" :disabled="!resultId">æŸ¥çœ‹å¤„ç†ç»“æœå›¾ç‰‡</button>
            <img :src="processedImage" alt="Processed Image" v-if="processedImage">
            <p>æˆ¿é—´ID: {{ roomId }}</p>
            <p>å¤„ç†ç»“æœID: {{ resultId }}</p>
            <p v-if="errorMessage" style="color:red;">é”™è¯¯æç¤º: {{ errorMessage }}</p>
          </div>-->
          <!--æ˜¾ç¤ºè°ƒè‰²æ¿ä¿¡æ¯
          <div>ä¸Šä¼ æ–‡ä»¶</div>
          <div>{{ this.testcolorRGB }}</div>
          <div>{{ this.SelectedColorNumber }}</div>
          <div>{{ this.prompts }}</div>
          <div>{{ this.colorNames2 }}</div>
          <div>{{ this.colorRGBs }}</div>
          <div>{{ this.OneOrFiveColored }}</div>
          <div>{{ this.colorRGBs2 }}</div>
          <div>{{ this.array }}</div>
          <div>{{ this.feedbackStr2 }}</div>
          <div>{{ this.base64Content }}</div>
          <img :src="base64Image" alt="Uploaded Image">
          <li v-for="(item, index) in colorNames2" :key="index">
            {{ index + 1 }}. {{ item }}
          </li>-->
          <!--<div>{{ displayedImages2 }}</div>-->
          <div style="display: flex; margin:2px auto;">
            <button @click="fetchAndDisplayImages" style="width:95px; height: 25px; margin: 2px;">æ˜¾ç¤ºå›¾ç‰‡</button>
          </div>
          <div style="display: flex; margin:2px auto;">
            <button @click="SetdisplayedImages1" style="width:25px; height: 25px; margin: 2px;">1</button>
            <button @click="SetdisplayedImages2" style="width:25px; height: 25px; margin: 2px;">2</button>
            <button @click="SetdisplayedImages3" style="width:25px; height: 25px; margin: 2px;">3</button>
            <button @click="SetdisplayedImages4" style="width:25px; height: 25px; margin: 2px;">4</button>
            <button @click="SetdisplayedImages5" style="width:25px; height: 25px; margin: 2px;">5</button>
          </div>
          <div style="height: 560px;width: 480px;overflow-y: auto;border: 1px solid #ccc; margin: 0 auto;">
            <div class="image-container">
              <img v-for="(image, index) in displayedImages" :key="index" :src="image" alt="Image" class="image">
            </div>
          </div>
          <div class="testbox">
            <div class="testpicture" v-for="(image, index) in tiaoseimages" :key="index">
              <div class="tset"><img :src="image" :alt="'image ' + (index + 1)"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>


<style>
.container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: 0;
  padding: 0;
}

.title {
  display: flex;
  height: 30px;
  border: 2px solid #d1bf90;
  background-color: #d1bf90;
  align-content: center;
  justify-content: center;
}

.text {
  text-align: center;
  font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
  /*å­—ä½“æ ·å¼*/
  font-weight: bolder;
  /*å­—ä½“ç²—ç»†*/
  color: #f7f5f5;
}

.main {
  display: flex;
  flex-direction: row;
  flex-grow: 1;
}

.left {
  flex: 2;
  background-color: rgb(231, 227, 216);

  margin-top: 4px;
  margin-right: 2px;
}

.right {
  flex: 2;
  background-color: rgb(231, 227, 216);

  margin-top: 4px;
  margin-left: 2px;
}

.middle {
  flex: 2;
  display: flex;
  flex-direction: column;
}

.middle-top {
  flex: 1;
  background-color: rgb(231, 227, 216);
  display: flex;
  flex-direction: column;
  margin-top: 4px;
  margin-left: 2px;
  margin-right: 2px;
}

.middle-bottom {
  flex: 1;
  background-color: rgb(231, 227, 216);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  margin-top: 4px;
  margin-left: 2px;
  margin-right: 2px;
}


/* ä¸‹æ‹‰æ¡† */
.select {
  margin-top: 5px;
  margin-left: 90px;
  margin-right: 90px;

}


.select1,
.select2,
.select3,
.select4,
.select5 {
  margin-top: 10px;
}

/* æ›´æ”¹é€‰æ‹©æ¡†ï¼ˆè¾“å…¥æ¡†ï¼‰çš„èƒŒæ™¯è‰² */
.el-select__wrapper.el-tooltip__trigger {
  background-color: #95815c;
  /* è®¾ç½®è¾“å…¥æ¡†èƒŒæ™¯è‰² */
  color: white;
  height: 40px;
}

.el-select__selected-item.el-select__placeholder span {
  color: white;
  /* å°†æ–‡æœ¬é¢œè‰²è®¾ç½®ä¸ºç™½è‰² */
}

/* æ›´æ”¹ä¸‹æ‹‰æ¡†çš„èƒŒæ™¯è‰² */
.el-select-dropdown__wrap {
  background-color: #d1bf90;
  /* è®¾ç½®ä¸‹æ‹‰æ¡†èƒŒæ™¯è‰² */
}

/* æ›´æ”¹ä¸‹æ‹‰é€‰é¡¹çš„èƒŒæ™¯è‰² */
.el-select-dropdown__item {
  background-color: #d1bf90;
  /* è®¾ç½®ä¸‹æ‹‰é€‰é¡¹èƒŒæ™¯è‰² */
  color: black;
  /* è®¾ç½®ä¸‹æ‹‰é€‰é¡¹æ–‡æœ¬é¢œè‰² */
}

/* æ›´æ”¹é€‰ä¸­é¡¹çš„èƒŒæ™¯è‰² */
.el-select-dropdown__item.selected {
  background-color: #d1bf90;
  /* è®¾ç½®é€‰ä¸­é¡¹èƒŒæ™¯è‰² */
  color: white;
  /* è®¾ç½®é€‰ä¸­é¡¹æ–‡æœ¬é¢œè‰² */
}


/* æ§åˆ¶é¢æ¿æ–‡æœ¬é¢œè‰² */
.leftTitle {
  display: flex;
  align-items: center;
  /* å‚ç›´å±…ä¸­ */
}

/* åé¦ˆæ¡† */
.feedback {
  height: 65px;
  display: flex;
  background-color: aliceblue;
  border: 1px solid black;
  margin-top: 5px;
  margin-bottom: 5px;
  margin-left: 40px;
  margin-right: 40px;
  padding-left: 6px;
  padding-right: 3px;
  flex-wrap: wrap;
  /* å…è®¸å†…å®¹æ¢è¡Œ */
  overflow-y: auto;
  /* å½“å†…å®¹è¿‡å¤šæ—¶æ˜¾ç¤ºå‚ç›´æ»šåŠ¨æ¡ */
  max-height: 200px;
  /* è®¾å®šæœ€å¤§é«˜åº¦ï¼Œä»¥ä¾¿å†…å®¹è¿‡å¤šæ—¶å‡ºç°æ»šåŠ¨æ¡ */
}


.feedback1,
.feedback2,
.feedback3,
.feedback4,
.feedback5 {
  height: 25px;
  /* æ·»åŠ ä¸€äº›å†…è¾¹è·ä»¥ä½¿å†…å®¹ä¸ç´§è´´è¾¹ç¼˜ */
  display: flex;
  /* ä½¿ç”¨ flex å¸ƒå±€ä»¥ä¾¿å­å…ƒç´ å¯ä»¥æ°´å¹³æ’åˆ— */
  align-items: center;
  /* å‚ç›´å±…ä¸­å­å…ƒç´  */
  margin-top: 13px;
  margin-bottom: 3px;
  /* å‚ç›´é—´è·ï¼Œç”¨äºæ¢è¡Œæ—¶çš„é—´éš” */
}

/* è®¾ç½® feedback-option çš„æ ·å¼ */
.feedback-option1,
.feedback-option2,
.feedback-option3,
.feedback-option4,
.feedback-option5 {
  height: 25px;
  width: auto;
  padding-left: 5px;
  margin-right: 3px;
  align-items: center;
  justify-content: center;
  border: 1px solid black;
  background-color: #d9d9d9;
}

/* è®¾ç½® feed-button2 çš„æ ·å¼*/
.feed-button1,
.feed-button2,
.feed-button3,
.feed-button4,
.feed-button5 {
  background-color: #d9d9d9;
  border: none;
  /* ç§»é™¤è¾¹æ¡†çº¿ */
  font-weight: bold;
  /* ä½¿å…¶çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªæ“ä½œæŒ‰é’® */
}


/*äº”è‰²ç³»å’Œå•è‰²ç³»*/
.color-selector-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 5px;
}

.color-selector-show {
  display: flex;
  flex-direction: row;
}

.monoColors-selector {
  margin-right: 50px;
}

.fiveColors-selector {
  /* ä¸ºäº”ä¸ªé¢œè‰²é€‰æ‹©å™¨å®¹å™¨æ·»åŠ æ ·å¼ */
  display: flex;
  flex-direction: column;
  gap: 8px;
  /* æ·»åŠ é—´è· */
  margin-right: 57px;
}

.color-block-container {
  display: flex;
  align-items: center;
  /* å‚ç›´å±…ä¸­ */
  margin-bottom: 2px;
  /* å¯é€‰ï¼Œä¸ºæ¯ä¸ªé¢œè‰²å—å®¹å™¨æ·»åŠ å‚ç›´é—´è· */
}

.color-block {
  width: 50px;
  /* ä¸¾ä¾‹ï¼Œè®¾ç½®é¢œè‰²å—çš„å®½åº¦ */
  height: 50px;
  /* ä¸¾ä¾‹ï¼Œè®¾ç½®é¢œè‰²å—çš„é«˜åº¦ */
  margin-right: 5px;
  /* ä¸ºé¢œè‰²å—å’Œé¢œè‰²åä¹‹é—´æ·»åŠ é—´è· */
}

.color-name {
  /* ä¸ºé¢œè‰²åæ·»åŠ æ ·å¼ */
  color: black;
  font-size: 15px;
}

.grid-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-gap: 6px;
  /* æ ¼å­ä¹‹é—´çš„é—´è· */
  justify-content: center;
  margin-top: 4px;
  margin-bottom: 4px;
  margin-left: auto;
  margin-right: auto;
  width: 350px;

}

/* è‰²ç³»é€‰æ‹©æ–‡æœ¬ */
.ColorFeedback-text {
  padding-left: 8px;
  padding-right: 8px;
  background-color: #95815c;
  /* çº¢è‰²èƒŒæ™¯ */
  color: white;
  /* ç™½è‰²æ–‡æœ¬ */
  display: flex;
  /* ä½¿ç”¨å¼¹æ€§å¸ƒå±€æ¥å‚ç›´å±…ä¸­å†…å®¹ */
  flex-direction: column;
  /* å‚ç›´æ’åˆ—å­å…ƒç´  */
  justify-content: center;
  /* å‚ç›´å±…ä¸­ */
  align-items: center;
  /* æ°´å¹³å±…ä¸­ */
  text-align: center;
  /* æ–‡æœ¬å±…ä¸­ */
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: 10%;
  margin-right: 10%;
  height: 85px;
}

/* ç”Ÿæˆå›¾ç‰‡ */
.produce-picture {
  display: flex;
  justify-content: center;
  margin-top: 8px;
  /*æ°´å¹³å±…ä¸­ */
}

.grid-item {
  width: 110px;
  /* æ ¹æ®éœ€è¦è°ƒæ•´æ ¼å­çš„å®½åº¦ */
  height: 90px;
  /* æ ¹æ®éœ€è¦è°ƒæ•´æ ¼å­çš„é«˜åº¦ */
  object-fit: cover;
  /* å›¾ç‰‡å¡«å……æ–¹å¼ï¼Œæ ¹æ®éœ€è¦è°ƒæ•´ */
}

.grid-item img {
  width: 100%;
  height: 100%;
}

.test-tiaose {
  display: flex;
  flex-direction: column;
  border: 1px solid black;
  height: 90%;
}

.testbox {
  display: grid;
  grid-template-rows: repeat(3, 1fr);
  /* åˆ›å»ºä¸‰è¡Œï¼Œæ¯è¡Œé«˜åº¦ç›¸ç­‰ */
  row-gap: 10px;
  /* è¡Œä¹‹é—´çš„é—´éš™ä¸º 10 åƒç´  */
}

.testpicture {
  height: fit-content;
}

.colorNumberBox {
  display: flex;
  flex-direction: row;
  border: 1px solid black;
  height: 34px;
  background-color: white;
}

.colorNumberBox .el-select__wrapper.el-tooltip__trigger {
  max-height: 20px !important;
  /* è®¾ç½®ä½ æœŸæœ›çš„é«˜åº¦ */
  line-height: 20px;
  /* ä¿æŒæ–‡æœ¬å‚ç›´å±…ä¸­ */
}

.TestButton {
  border: 1px solid black;
  flex: 2;
  background-color: white;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  /* å…è®¸å‚ç›´æ»šåŠ¨ */
}

.ChooseColorScheme {
  border: 1px solid black;
  flex: 3;
  background-color: white;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
  align-items: center;
  overflow-y: auto;
  /* å…è®¸å‚ç›´æ»šåŠ¨ */
}

.palette-button {
  display: inline-block;
  margin: 2px;
  padding: 2px;
  border: 1px solid #ccc;
  position: relative;
  cursor: pointer;
  width: calc(100% / 3 - 20px);
  /* å‡è®¾æ¯è¡Œæœ€å¤š3ä¸ªé¡¹ç›®ï¼Œå¹¶ç•™å‡ºä¸€äº›é—´è· */
}

.color-blocks-container {
  display: flex;
  flex-direction: column;
  /* è®¾ç½®ä¸ºå‚ç›´æ–¹å‘ */
  justify-content: space-around;
  align-items: center;
  padding: auto;
}

.color-block {
  width: 20px;
  height: 20px;
  display: inline-block;
  margin-bottom: 1px;
}

.palette-names {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: rgba(255, 255, 255, 0.8);
  padding: 5px;
  display: flex;
  justify-content: center;
}

.chcolor {
  background-color: #ccc;
  color: black;
  margin: 5px 0 5px 20px;
  height: 24px;
}

.active {
  background-color: black;
  color: white;
}

.colorNumberBox .el-select__wrapper.el-tooltip__trigger {
  min-height: 22px;
  width: 90px;
  margin-top: 5px;
  background-color: rgb(217, 217, 217);
  border: 1px solid black
}

.colorNumberBox .el-select__selected-item.el-select__placeholder span {
  color: black;

  /* å°†æ–‡æœ¬é¢œè‰²è®¾ç½®ä¸ºé»‘è‰² */
}

/* é€‰æ‹©çš„é¢œè‰²æ–¹æ¡ˆæ ·å¼ */
.color-scheme-display {
  display: flex;
  margin: 10px auto;
  flex-direction: column;
  align-items: flex-start;
}

.color-entry1 {
  display: flex;
  align-items: center;
  margin-bottom: 2px;
  /* è®¾ç½®é¢œè‰²å—ä¹‹é—´çš„é—´è· */
}

.color-preview1 {
  width: 40px;
  /* ä½ å¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®é¢œè‰²å—çš„å®½åº¦ */
  height: 40px;
  /* ä½ å¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®é¢œè‰²å—çš„é«˜åº¦ */
  border: 1px solid #ccc;
  /* å¯é€‰ï¼šä¸ºé¢œè‰²å—æ·»åŠ è¾¹æ¡† */
  margin-left: 15px;
}

.color-name1 {
  margin-left: 10px;
  /* è®¾ç½®é¢œè‰²å—å’Œé¢œè‰²åä¹‹é—´çš„é—´è· */
  font-size: 14px;
}


.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 50%;
  height: 50%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: auto;
  /* å…è®¸æ»šåŠ¨æ¡å‡ºç°ï¼Œå¦‚æœiframeå†…å®¹è¶…å‡ºè§†å£ */
  z-index: 1000;
}

.modal {
  position: relative;
  width: 100%;
  /* å®½åº¦è®¾ç½®ä¸º100%ï¼Œä½†ä¼šè¢«å†…éƒ¨iframeçš„min-widthç­‰å±æ€§é™åˆ¶ */
  height: 100%;
  /* é«˜åº¦è®¾ç½®ä¸º100%ï¼Œä½†åŒæ ·ä¼šå—åˆ°é™åˆ¶ */
  display: flex;
  flex-direction: column;
  /* å‚ç›´å¸ƒå±€ */
  box-sizing: border-box;
  /* åŒ…å«paddingå’Œborderåœ¨widthå’Œheightå†… */
}

.close-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
  z-index: 1001;
  /* ç¡®ä¿å…³é—­æŒ‰é’®åœ¨iframeä¹‹ä¸Š */
}

.modal-iframe {
  width: 100%;
  height: 100%;
  border: none;
  display: block;
  /* ç§»é™¤iframeä¸‹æ–¹çš„é»˜è®¤ç©ºé—´ */
}




.image-container {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  /* ä¸¤åˆ— */
  gap: 10px;
  /* å›¾ç‰‡ä¹‹é—´çš„é—´è· */
}

.image {
  width: 100%;
  /* å›¾ç‰‡å®½åº¦è‡ªåŠ¨è°ƒæ•´ä»¥é€‚åº”å®¹å™¨ */
  height: auto;
  /* ä¿æŒåŸå§‹å®½é«˜æ¯” */
}


canvas {
  margin-top: 2px;
  border: 1px solid black;
}


</style>
